(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fffea10e"],{"0e63":function(t,e,s){},"4ba2":function(t,e,s){var n=s("2ea2"),o=s("2f77"),a=s("69b3"),i=s("e7ad").Reflect;t.exports=i&&i.ownKeys||function(t){var e=n.f(a(t)),s=o.f;return s?e.concat(s(t)):e}},"4c0f":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.include?s("div",{staticClass:"vh-100"},[s("v-title",{attrs:{title:"节点快速选择","title-class":"icons cui-puzzle"}}),s("ul",{staticClass:"list-group list-group-flush vh-100",staticStyle:{"overflow-y":"auto"}},t._l(t.nodes,(function(e,n){return s("li",{staticClass:"list-group-item list-group-item-action",class:{active:t.activeNode(e)},on:{click:function(s){return t.chooseNode(e)}}},[t._v("\n            "+t._s(e.name)+"  ( "+t._s(e.code)+" )\n        ")])})),0)],1):s("div",[s("v-title",{attrs:{title:"管理节点","title-class":"icons cui-puzzle"}},[s("a",{staticClass:"text-danger font-weight-bold",attrs:{href:"#"},on:{click:t.onAddNode}},[s("i",{staticClass:"fa fa-plus-circle"}),t._v(" 添加节点\n        ")])]),s("div",{staticClass:"row p-5"},t._l(t.nodes,(function(e,n){return s("div",{staticClass:"col-auto"},[s("div",{staticClass:"card",class:{"bg-primary":t.activeNode(e)},on:{click:function(s){return t.chooseNode(e)}}},[s("div",{staticClass:"card-header"},[t._v("\n                    "+t._s(e.name)+"  ( "+t._s(e.code)+" )\n                    "),s("div",{staticClass:"card-header-actions"},[s("a",{staticClass:"card-header-action btn-setting text-white",attrs:{href:"#"},on:{click:function(s){return t.onAddNode(e)}}},[s("i",{staticClass:"icon-settings"})]),"local"!==e.code?s("Delete",{attrs:{title:"删除管理节点【"+e.name+"】"},on:{ok:function(s){return t.onDelNode(e)}}},[s("a",{staticClass:"card-header-action text-white",attrs:{href:"#"}},[s("i",{staticClass:"icons icon-close"})])]):t._e()],1)]),s("div",{staticClass:"card-body"},[s("h5",[t._v("用户："+t._s(e.user))]),s("h6",[t._v(t._s(e.address))])])])])})),0),null!==t.node?s("modal",{attrs:{title:"添加节点",show:null!==t.node},on:{cancel:function(e){t.node=null},ok:t.setNode}},[s("div",{staticClass:"p-3"},[s("div",{staticClass:"form-group"},[s("div",{staticClass:"input-group"},[s("div",{staticClass:"input-group-prepend"},[s("span",{staticClass:"input-group-text"},[t._v("名　称:")])]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.node.name,expression:"node.name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"节点名称描述"},domProps:{value:t.node.name},on:{input:function(e){e.target.composing||t.$set(t.node,"name",e.target.value)}}})])]),s("div",{staticClass:"form-group"},[s("div",{staticClass:"input-group"},[s("div",{staticClass:"input-group-prepend"},[s("span",{staticClass:"input-group-text"},[t._v("地　址:")])]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.node.address,expression:"node.address"}],staticClass:"form-control",attrs:{type:"text",placeholder:"节点地址"},domProps:{value:t.node.address},on:{input:function(e){e.target.composing||t.$set(t.node,"address",e.target.value)}}})])]),s("div",{staticClass:"form-group"},[s("div",{staticClass:"input-group"},[s("div",{staticClass:"input-group-prepend"},[s("span",{staticClass:"input-group-text"},[t._v("编　码:")])]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.node.code,expression:"node.code"}],staticClass:"form-control",attrs:{type:"text",placeholder:"由字母、数字、- _ 组成"},domProps:{value:t.node.code},on:{input:function(e){e.target.composing||t.$set(t.node,"code",e.target.value)}}})])]),s("div",{staticClass:"form-group"},[s("div",{staticClass:"input-group"},[s("div",{staticClass:"input-group-prepend"},[s("span",{staticClass:"input-group-text"},[t._v("用　户:")])]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.node.user,expression:"node.user"}],staticClass:"form-control",attrs:{type:"text",placeholder:"节点BasicAuth用户"},domProps:{value:t.node.user},on:{input:function(e){e.target.composing||t.$set(t.node,"user",e.target.value)}}})])]),s("div",{staticClass:"form-group"},[s("div",{staticClass:"input-group"},[s("div",{staticClass:"input-group-prepend"},[s("span",{staticClass:"input-group-text"},[t._v("密　码:")])]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.node.password,expression:"node.password"}],staticClass:"form-control",attrs:{type:"text",placeholder:"节点BasicAuth密码"},domProps:{value:t.node.password},on:{input:function(e){e.target.composing||t.$set(t.node,"password",e.target.value)}}})])])])]):t._e()],1)},o=[],a=(s("cc57"),s("c0cf")),i=s("5df5"),c=s("c9b1"),r={name:"Nodes",components:{Delete:c["a"],Modal:i["a"],VTitle:a["a"]},data:function(){return{nodes:[],node:null,colors:["text-white bg-success","bg-info","bg-warning","bg-danger"]}},inject:["reload"],props:{include:{type:Boolean,default:!1}},mounted:function(){this.queryNodes()},methods:{onAddNode:function(t){this.node=void 0===t||null===t?{code:"",name:"",user:"",password:"",address:""}:{code:t.code,name:t.name,user:t.user,password:"",address:t.address}},onDelNode:function(t){var e=this;e.$axios.delete("/admin/node?code="+t.code).then((function(t){e.$toast.success("删除成功！"),e.queryNodes()})).catch((function(t){e.$alert("设置错误！")}))},queryNodes:function(){var t=this;t.$axios.get("/admin/nodes").then((function(e){t.nodes=e})).catch((function(e){t.$alert(e.message)}))},chooseNode:function(t){this.$store.commit("setNode",t)},setNode:function(){if(""!==this.node.name)if(""!==this.node.code)if(""!==this.node.address)if(""!==this.node.user)if(""!==this.node.password){var t=this;t.$axios.post("/admin/node",this.node).then((function(e){t.node=null,t.queryNodes()})).catch((function(e){t.$alert("设置错误！")}))}else this.$alert("节点密码不能为空！");else this.$alert("节点用户不能为空！");else this.$alert("节点地址不能为空！");else this.$alert("节点编码不能为空！");else this.$alert("名称不能为空！")},activeNode:function(t){return this.$store.getters.node.code===t.code}}},l=r,d=s("c701"),u=Object(d["a"])(l,n,o,!1,null,"6cebdc66",null);e["default"]=u.exports},"5ab2":function(t,e,s){var n=s("e46b"),o=s("4ba2"),a=s("09b9"),i=s("dcb7"),c=s("ebc3");n(n.S,"Object",{getOwnPropertyDescriptors:function(t){var e,s,n=a(t),r=i.f,l=o(n),d={},u=0;while(l.length>u)s=r(n,e=l[u++]),void 0!==s&&c(d,e,s);return d}})},"5df5":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:t.transition,appear:""}},[t.show?s("div",{ref:"modal",staticClass:"modal fade show",style:t.getStyle,on:{mousedown:t.mouseDown}},[s("div",{staticClass:"modal-dialog",class:t.getClass,attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[t._t("modal-header",[t.title?s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title"},[t._v(t._s(t.title))]),s("a",{staticClass:"close",attrs:{"aria-label":"Close"},on:{click:function(e){return e.stopPropagation(),t.clickCloseBtn(e)}}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]):t._e()]),s("div",{staticClass:"modal-body p-0"},[t._t("default")],2),t._t("modal-footer",[s("div",{staticClass:"modal-footer"},[t.cancelButtonOptions.visible?s("button",{staticClass:"w-25",class:Object.assign({},t.cancelButtonOptions.btnClass),attrs:{type:"button","data-dismiss":"modal"},on:{click:function(e){return e.stopPropagation(),t.clickCloseBtn(e)}}},[t._v(t._s(t.cancelButtonOptions.title)+"\n                        ")]):t._e(),t.saveButtonOptions.visible?s("button",{staticClass:"w-25",class:Object.assign({},t.saveButtonOptions.btnClass),attrs:{type:"button"},on:{click:t.clickSaveBtn}},[t._v(t._s(t.saveButtonOptions.title)+"\n                        ")]):t._e()])])],2)])]):t._e()])},o=[];s("5ab2"),s("6d57"),s("e10e");function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function i(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function c(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?i(Object(s),!0).forEach((function(e){a(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var r={count:0},l={name:"modal",props:{show:Boolean,title:String,modalClass:{type:Object,default:null},hasBackdrop:{type:Boolean,default:!0},saveButton:{type:Object,default:function(){return{}}},cancelButton:{type:Object,default:function(){return{}}},transition:{type:String,default:"translate-fade"},closeOnEscape:{type:Boolean,default:!0}},data:function(){return{isShow:this.show,backdrop:null,zIndex:0,modals:r}},mounted:function(){this.show&&(r.count++,this.zIndex=r.count,this.$emit("show",!0,this.zIndex,r.count)),this.checkBackdrop()},destroyed:function(){this.show&&(r.count--,this.zIndex=r.count,this.$emit("show",!1,this.zIndex,r.count)),this.backdrop&&this.show&&document.body.removeChild(this.backdrop),0===r.count&&document.body.classList.remove("modal-open")},methods:{clickCloseBtn:function(){this.$emit("cancel")},clickSaveBtn:function(){this.$emit("ok")},handleEscape:function(t){this.show&&27===t.keyCode&&this.zIndex===this.totalModals&&this.$emit("close")},mouseDown:function(t){this.$refs.modal===t.target&&(this.$emit("close"),t.preventDefault())},checkBackdrop:function(){this.hasBackdrop&&(this.show&&1===this.zIndex?document.body.classList.add("modal-open"):!this.show&&(this.zIndex,this.totalModals),this.show?(this.backdrop=document.createElement("div"),this.backdrop.classList.add("modal-backdrop","fade","show"),this.backdrop.style.zIndex=1048+2*this.zIndex,document.body.appendChild(this.backdrop)):this.backdrop&&(document.body.removeChild(this.backdrop),document.body.classList.remove("modal-open")))}},computed:{totalModals:function(){return r.count},getStyle:function(){var t={};return this.show&&(t.display="block"),t["z-index"]=1048+2*this.zIndex+1,t},getClass:function(){var t={},e=this.totalModals-this.zIndex;return t["modal-stack-"+e]=!0,t["modal-order-"+this.zIndex]=!0,t.aside=this.zIndex!==this.totalModals,c(c({},t),this.modalClass)},saveButtonOptions:function(){var t={title:"确定",visible:!0,btnClass:{"btn btn-primary":!0}};return c(c({},t),this.saveButton)},cancelButtonOptions:function(){var t={title:"取消",visible:!0,btnClass:{"btn btn-outline-secondary":!0}};return c(c({},t),this.cancelButton)}},watch:{show:function(t){t?r.count++:r.count--,this.zIndex=r.count,this.$emit("show",t,this.zIndex,r.count),t||0!==r.count||document.body.classList.remove("modal-open"),this.checkBackdrop()},closeOnEscape:{handler:function(t){"undefined"!==typeof document&&(t?document.addEventListener("keydown",this.handleEscape):document.removeEventListener("keydown",this.handleEscape))},immediate:!0}}},d=l,u=(s("cbb6"),s("c701")),p=Object(u["a"])(d,n,o,!1,null,"0d2e2f80",null);e["a"]=p.exports},c0cf:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ol",{staticClass:"breadcrumb breadcrumb-fixed"},[s("li",{staticClass:"breadcrumb-item"},[s("i",{staticClass:"fa",class:t.titleClass}),t._v(" "+t._s(t.title)+"\n    ")]),s("li",{staticClass:"ml-auto"},[t._t("default")],2)])},o=[],a={name:"vTitle",props:{title:String,titleClass:{type:String,default:""}}},i=a,c=s("c701"),r=Object(c["a"])(i,n,o,!1,null,null,null);e["a"]=r.exports},c9b1:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{on:{click:t.confirm}},[t._t("default")],2)},o=[],a={name:"delete",props:{title:{type:String,default:"确定？"},message:{type:String,default:"确定删除"}},methods:{confirm:function(){var t=this;this.$confirm(t.message,{title:t.title}).then((function(e){t.$emit("ok")})).catch((function(t){}))}}},i=a,c=s("c701"),r=Object(c["a"])(i,n,o,!1,null,null,null);e["a"]=r.exports},cbb6:function(t,e,s){"use strict";s("0e63")},e10e:function(t,e,s){var n=s("008a"),o=s("80a9");s("f0cc")("keys",(function(){return function(t){return o(n(t))}}))},ebc3:function(t,e,s){"use strict";var n=s("064e"),o=s("cc33");t.exports=function(t,e,s){e in t?n.f(t,e,o(0,s)):t[e]=s}},f0cc:function(t,e,s){var n=s("e46b"),o=s("7ddc"),a=s("238a");t.exports=function(t,e){var s=(o.Object||{})[t]||Object[t],i={};i[t]=e(s),n(n.S+n.F*a((function(){s(1)})),"Object",i)}}}]);
//# sourceMappingURL=chunk-fffea10e.bf81d2e0.js.map