{"version":3,"sources":["webpack:///./src/views/upstream/Upstreams.vue?66a8","webpack:///src/views/upstream/Upstreams.vue","webpack:///./src/views/upstream/Upstreams.vue?8d54","webpack:///./src/views/upstream/Upstreams.vue","webpack:///./src/plugins/vTitle.vue?cbde","webpack:///src/plugins/vTitle.vue","webpack:///./src/plugins/vTitle.vue?7b68","webpack:///./src/plugins/vTitle.vue","webpack:///./src/plugins/delete.vue?b6d3","webpack:///src/plugins/delete.vue","webpack:///./src/plugins/delete.vue?0737","webpack:///./src/plugins/delete.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","_v","_m","_l","up","_s","name","commit","_e","protocol","loadStrategy","s","idx","host","port","on","$event","editUpstream","deleteUpstream","staticRenderFns","staticStyle","component","class","titleClass","title","_t","confirm"],"mappings":"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","file":"static/js/chunk-3aebefac.4c331b55.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-title',{attrs:{\"title\":\"负载均衡管理\",\"title-class\":\"icons cui-puzzle\"}},[_c('router-link',{staticClass:\"btn btn-sm btn-primary\",attrs:{\"to\":\"/admin/upstream/edit\"}},[_vm._v(\"\\n            添加负载\\n        \")])],1),_c('div',{staticClass:\"p-3\"},[_c('table',{staticClass:\"table table-bordered table-hover\"},[_vm._m(0),_c('tbody',[_vm._l((_vm.upstreams),function(up){return [_c('tr',[_c('td',[_vm._v(\"\\n                        \"+_vm._s(up.name)+\"\\n                        \"),(up.commit !== '')?_c('span',{staticClass:\"text-black-50\"},[_c('br'),_vm._v(_vm._s(up.commit))]):_vm._e()]),_c('td',[_c('span',{staticClass:\"badge badge-success\"},[_vm._v(_vm._s(up.protocol))])]),_c('td',[_vm._v(\"\\n                        \"+_vm._s(up.loadStrategy === '' ? '默认' : up.loadStrategy)+\"\\n                    \")]),_c('td',_vm._l((up.servers),function(s,idx){return _c('span',{staticClass:\"font-weight-bold\"},[(idx !== 0)?_c('span',[_vm._v(\",  \")]):_vm._e(),_vm._v(\" \"+_vm._s(s.host)+\":\"+_vm._s(s.port)+\"\\n                        \")])}),0),_c('td',[_c('button',{staticClass:\"btn btn-sm btn-primary\",on:{\"click\":function($event){return _vm.editUpstream(up)}}},[_vm._v(\"\\n                            编辑\\n                        \")]),_c('Delete',{on:{\"ok\":function($event){return _vm.deleteUpstream(up)}}},[_c('button',{staticClass:\"btn btn-sm btn-danger ml-2\"},[_vm._v(\"\\n                                删除\\n                            \")])])],1)])]})],2)])])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('thead',[_c('tr',[_c('th',{staticStyle:{\"width\":\"200px\"}},[_vm._v(\"名称/备注\")]),_c('th',{staticStyle:{\"width\":\"120px\"}},[_vm._v(\"转发类型\")]),_c('th',{staticStyle:{\"width\":\"120px\"}},[_vm._v(\"策略\")]),_c('th',[_vm._v(\"负载\")]),_c('th',{staticStyle:{\"width\":\"120px\"}},[_vm._v(\"操作\")])])])}]\n\nexport { render, staticRenderFns }","<template>\n    <div>\n        <v-title title=\"负载均衡管理\" title-class=\"icons cui-puzzle\">\n            <router-link to=\"/admin/upstream/edit\" class=\"btn btn-sm btn-primary\">\n                添加负载\n            </router-link>\n        </v-title>\n        <div class=\"p-3\">\n            <table class=\"table table-bordered table-hover\">\n                <thead>\n                <tr>\n                    <th style=\"width: 200px\">名称/备注</th>\n                    <th style=\"width: 120px\">转发类型</th>\n                    <th style=\"width: 120px\">策略</th>\n                    <th>负载</th>\n                    <th style=\"width: 120px\">操作</th>\n                </tr>\n                </thead>\n                <tbody>\n                <template v-for=\"up in upstreams\">\n                    <tr>\n                        <td>\n                            {{ up.name }}\n                            <span v-if=\"up.commit !== ''\" class=\"text-black-50\"><br/>{{ up.commit }}</span>\n                        </td>\n                        <td>\n                            <span class=\"badge badge-success\">{{ up.protocol }}</span>\n                        </td>\n                        <td>\n                            {{ up.loadStrategy === '' ? '默认' : up.loadStrategy }}\n                        </td>\n                        <td>\n                            <span v-for=\"(s,idx) in up.servers\" class=\"font-weight-bold\">\n                                <span v-if=\"idx !== 0\">,&nbsp;&nbsp;</span> {{ s.host }}:{{ s.port }}\n                            </span>\n                        </td>\n                        <td>\n                            <button class=\"btn btn-sm btn-primary\" @click=\"editUpstream(up)\">\n                                编辑\n                            </button>\n                            <Delete @ok=\"deleteUpstream(up)\">\n                                <button class=\"btn btn-sm btn-danger ml-2\">\n                                    删除\n                                </button>\n                            </Delete>\n                        </td>\n                    </tr>\n                </template>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</template>\n\n<script>\nimport VTitle from \"@/plugins/vTitle\";\nimport Delete from \"@/plugins/delete\";\n\nexport default {\n    name: \"Upstreams\",\n    components: {Delete, VTitle},\n    data: () => ({\n        upstreams: [],\n    }),\n    mounted() {\n        this.queryUpstreams();\n    },\n    methods: {\n        queryUpstreams() {\n            let self = this;\n            self.$axios.get(\"/admin/api/upstream\").then(res => {\n                self.upstreams = res;\n            }).catch(e => {\n                self.$alert(\"错误\" + e.message);\n            })\n        },\n        editUpstream(upstream) {\n            this.$router.push({\n                path: '/admin/upstream/edit',\n                query: {name: upstream.name}\n            })\n        },\n        deleteUpstream(upstream) {\n            let self = this;\n            let url = \"/admin/api/directive\";\n            for (let i = 0; i < upstream.queries.length; i++) {\n                if (i === 0) {\n                    url += \"?q=\" + encodeURI(upstream.queries[i]);\n                } else {\n                    url += \"&q=\" + encodeURI(upstream.queries[i]);\n                }\n            }\n            this.$axios.delete(url).then(res => {\n                self.$toast.success(\"删除成功！\")\n                self.queryUpstreams()\n            }).catch(e => {\n                self.$toast.error(e.message);\n            })\n        }\n    }\n}\n</script>\n","import mod from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.1@babel-loader/lib/index.js!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.5@vue-loader/lib/index.js??vue-loader-options!./Upstreams.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.1@babel-loader/lib/index.js!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.5@vue-loader/lib/index.js??vue-loader-options!./Upstreams.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Upstreams.vue?vue&type=template&id=a249bb80&\"\nimport script from \"./Upstreams.vue?vue&type=script&lang=js&\"\nexport * from \"./Upstreams.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.5@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ol',{staticClass:\"breadcrumb breadcrumb-fixed\"},[_c('li',{staticClass:\"breadcrumb-item\"},[_c('i',{staticClass:\"fa\",class:_vm.titleClass}),_vm._v(\" \"+_vm._s(_vm.title)+\"\\n    \")]),_c('li',{staticClass:\"ml-auto\"},[_vm._t(\"default\")],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <ol class=\"breadcrumb breadcrumb-fixed\">\n        <li class=\"breadcrumb-item\">\n            <i class=\"fa\" :class=\"titleClass\"/>&nbsp;{{title}}\n        </li>\n        <li class=\"ml-auto\">\n            <slot/>\n        </li>\n    </ol>\n</template>\n\n<script>\n    export default {\n        name: \"vTitle\",\n        props: {\n            title: String,\n            titleClass: {\n                type: String,\n                default: \"\"\n            },\n        }\n    }\n</script>\n","import mod from \"-!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.1@babel-loader/lib/index.js!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.5@vue-loader/lib/index.js??vue-loader-options!./vTitle.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.1@babel-loader/lib/index.js!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.5@vue-loader/lib/index.js??vue-loader-options!./vTitle.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./vTitle.vue?vue&type=template&id=02a1053a&\"\nimport script from \"./vTitle.vue?vue&type=script&lang=js&\"\nexport * from \"./vTitle.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.5@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{on:{\"click\":_vm.confirm}},[_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <span @click=\"confirm\">\n        <slot></slot>\n    </span>\n</template>\n<script>\n    export default {\n        name: \"delete\",\n        props: {\n            title: {\n                type: String,\n                default: \"确定？\"\n            },\n            message: {\n                type: String,\n                default: \"确定删除\"\n            }\n        },\n        methods: {\n            confirm() {\n                let self = this;\n                this.$confirm(self.message, {\"title\": self.title}).then(ok => {\n                    self.$emit(\"ok\")\n                }).catch(cancel => {\n                });\n            }\n        }\n    }\n</script>\n","import mod from \"-!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.1@babel-loader/lib/index.js!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.5@vue-loader/lib/index.js??vue-loader-options!./delete.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.1@babel-loader/lib/index.js!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.5@vue-loader/lib/index.js??vue-loader-options!./delete.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./delete.vue?vue&type=template&id=2ce8dd3a&\"\nimport script from \"./delete.vue?vue&type=script&lang=js&\"\nexport * from \"./delete.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.5@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}