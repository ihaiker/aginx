(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3aebefac"],{"8e4f":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-title",{attrs:{title:"负载均衡管理","title-class":"icons cui-puzzle"}},[s("router-link",{staticClass:"btn btn-sm btn-primary",attrs:{to:"/admin/upstream/edit"}},[t._v("\n            添加负载\n        ")])],1),s("div",{staticClass:"p-3"},[s("table",{staticClass:"table table-bordered table-hover"},[t._m(0),s("tbody",[t._l(t.upstreams,(function(e){return[s("tr",[s("td",[t._v("\n                        "+t._s(e.name)+"\n                        "),""!==e.commit?s("span",{staticClass:"text-black-50"},[s("br"),t._v(t._s(e.commit))]):t._e()]),s("td",[s("span",{staticClass:"badge badge-success"},[t._v(t._s(e.protocol))])]),s("td",[t._v("\n                        "+t._s(""===e.loadStrategy?"默认":e.loadStrategy)+"\n                    ")]),s("td",t._l(e.servers,(function(e,n){return s("span",{staticClass:"font-weight-bold"},[0!==n?s("span",[t._v(",  ")]):t._e(),t._v(" "+t._s(e.host)+":"+t._s(e.port)+"\n                        ")])})),0),s("td",[s("button",{staticClass:"btn btn-sm btn-primary",on:{click:function(s){return t.editUpstream(e)}}},[t._v("\n                            编辑\n                        ")]),s("Delete",{on:{ok:function(s){return t.deleteUpstream(e)}}},[s("button",{staticClass:"btn btn-sm btn-danger ml-2"},[t._v("\n                                删除\n                            ")])])],1)])]}))],2)])])],1)},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{staticStyle:{width:"200px"}},[t._v("名称/备注")]),s("th",{staticStyle:{width:"120px"}},[t._v("转发类型")]),s("th",{staticStyle:{width:"120px"}},[t._v("策略")]),s("th",[t._v("负载")]),s("th",{staticStyle:{width:"120px"}},[t._v("操作")])])])}],i=(s("cc57"),s("c0cf")),r=s("c9b1"),c={name:"Upstreams",components:{Delete:r["a"],VTitle:i["a"]},data:function(){return{upstreams:[]}},mounted:function(){this.queryUpstreams()},methods:{queryUpstreams:function(){var t=this;t.$axios.get("/admin/api/upstream").then((function(e){t.upstreams=e})).catch((function(e){t.$alert("错误"+e.message)}))},editUpstream:function(t){this.$router.push({path:"/admin/upstream/edit",query:{name:t.name}})},deleteUpstream:function(t){for(var e=this,s="/admin/api/directive",n=0;n<t.queries.length;n++)s+=0===n?"?q="+encodeURI(t.queries[n]):"&q="+encodeURI(t.queries[n]);this.$axios.delete(s).then((function(t){e.$toast.success("删除成功！"),e.queryUpstreams()})).catch((function(t){e.$toast.error(t.message)}))}}},l=c,u=s("c701"),o=Object(u["a"])(l,n,a,!1,null,null,null);e["default"]=o.exports},c0cf:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ol",{staticClass:"breadcrumb breadcrumb-fixed"},[s("li",{staticClass:"breadcrumb-item"},[s("i",{staticClass:"fa",class:t.titleClass}),t._v(" "+t._s(t.title)+"\n    ")]),s("li",{staticClass:"ml-auto"},[t._t("default")],2)])},a=[],i={name:"vTitle",props:{title:String,titleClass:{type:String,default:""}}},r=i,c=s("c701"),l=Object(c["a"])(r,n,a,!1,null,null,null);e["a"]=l.exports},c9b1:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{on:{click:t.confirm}},[t._t("default")],2)},a=[],i={name:"delete",props:{title:{type:String,default:"确定？"},message:{type:String,default:"确定删除"}},methods:{confirm:function(){var t=this;this.$confirm(t.message,{title:t.title}).then((function(e){t.$emit("ok")})).catch((function(t){}))}}},r=i,c=s("c701"),l=Object(c["a"])(r,n,a,!1,null,null,null);e["a"]=l.exports}}]);
//# sourceMappingURL=chunk-3aebefac.4c331b55.js.map