(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63436670"],{"0167":function(t,e,n){"use strict";n("29a9")},"0ac3":function(t,e,n){"use strict";function i(t,e){if(void 0===t||null===t)throw new TypeError("Cannot convert first argument to object");for(var n=Object(t),i=1;i<arguments.length;i++){var s=arguments[i];if(void 0!==s&&null!==s)for(var a=Object.keys(Object(s)),r=0,o=a.length;r<o;r++){var c=a[r],l=Object.getOwnPropertyDescriptor(s,c);void 0!==l&&l.enumerable&&(n[c]=s[c])}}return n}function s(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:i})}t.exports={assign:i,polyfill:s}},"29a9":function(t,e,n){},3938:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-title",{attrs:{title:"代理列表","title-class":"icons cui-puzzle"}},[n("router-link",{attrs:{to:"/admin/server/edit"}},[n("i",{staticClass:"fa fa-plus-circle"}),t._v(" 添加服务\n        ")])],1),n("div",{staticClass:"p-3"},[n("table",{staticClass:"table table-bordered table-hover"},[t._m(0),n("tbody",[t._l(t.services,(function(e){return[n("tr",[n("td",[n("span",{staticClass:"badge badge-dark"},[t._v(t._s(e.protocol))]),t._l(e.domains,(function(e){return n("span",{staticClass:"text-success font-weight-bold ml-2"},[t._v("\n                            "+t._s(e)+"\n                        ")])})),e.commit?n("div",{staticClass:"text-black-50"},[t._v("\n                            "+t._s(e.commit)+"\n                        ")]):t._e()],2),n("td",t._l(e.listens,(function(e){return n("div",[n("span",[t._v(t._s(e.host)+":"+t._s(e.port))]),e.default?n("span",{staticClass:"badge badge-success ml-2"},[t._v("默认")]):t._e(),e.http2?n("span",{staticClass:"badge badge-info ml-2"},[t._v("http2")]):t._e(),e.ssl?n("span",{staticClass:"badge badge-danger ml-2"},[t._v("ssl")]):t._e()])})),0),n("td",["http"!==e.protocol?n("div",[t._v("\n                            转向负载：\n                            "),n("router-link",{staticClass:"text-primary font-weight-bold",attrs:{to:{path:"/admin/upstream/edit",query:{name:e.proxyPass}}}},[t._v("\n                                "+t._s(e.proxyPass)+"\n                            ")])],1):t._e(),t._l(e.locations,(function(i){return"http"===e.protocol?n("div",[n("div",{staticClass:"badge badge-light"},[t._v("\n                                "+t._s(i.path)+"\n                            ")]),"html"===i.type?[t._v("\n                                静态文件\n                                "),n("span",{staticClass:"text-success font-weight-bold"},[t._v("\n                                    "+t._s(i.html.model)+": "+t._s(i.html.path)+"\n                                ")])]:"upstream"===i.type?[t._v("\n                                负载均衡\n                                "),n("router-link",{staticClass:"text-primary font-weight-bold",attrs:{to:{path:"/admin/upstream/edit",query:{name:i.upstream.name}}}},[t._v("\n                                    "+t._s(i.upstream.name)+"\n                                ")]),t._v("\n                                "+t._s(i.upstream.path)+"\n                            ")]:"http"===i.type?[t._v("\n                                动态代理\n                                "),n("span",{staticClass:"text-primary font-weight-bold"},[t._v("\n                                    "+t._s(i.http.to)+"\n                                ")])]:[t._v("\n                                用户定义\n                            ")],i.commit?n("span",{staticClass:"text-secondary"},[t._v(t._s(i.commit))]):t._e()],2):t._e()}))],2),n("td",[n("div",{staticClass:"d-flex justify-content-around"},[n("button",{staticClass:"btn btn-sm btn-outline-primary",on:{click:function(n){return t.editServer(e)}}},[n("i",{staticClass:"fa fa-edit"}),t._v(" 编辑\n                            ")]),n("button",{staticClass:"btn btn-sm btn-outline-danger",on:{click:function(n){return t.deleteServer(e.queries)}}},[n("i",{staticClass:"fa fa-remove"}),t._v(" 删除\n                            ")])])])])]}))],2)])])],1)},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",{staticClass:"text-wrap",staticStyle:{width:"240px"},attrs:{scope:"col"}},[t._v("协议/域名/描述")]),n("th",{staticStyle:{width:"100px"},attrs:{scope:"col"}},[t._v("监听")]),n("th",{attrs:{scope:"col"}},[t._v("代理地址")]),n("th",{staticStyle:{width:"160px"},attrs:{scope:"col"}},[t._v("操作")])])])}],a=n("c0cf"),r=n("7a47"),o=n.n(r),c=n("c9b1"),l={name:"Files",components:{Delete:c["a"],VTitle:a["a"],VueInputAutowidth:o.a},data:function(){return{services:[]}},mounted:function(){this.queryServices()},methods:{queryServices:function(){var t=this;this.$axios.get("/admin/api/server").then((function(e){t.services=e})).catch((function(e){t.$toast.error(e.message)}))},editServer:function(t){"http"!==t.protocol?this.$router.push({path:"/admin/server/edit",query:{name:t.proxyPass,protocol:t.protocol}}):this.$router.push({path:"/admin/server/edit",query:{name:t.domains[0],protocol:t.protocol}})},deleteServer:function(t){for(var e=this,n="/admin/api/directive",i=0;i<t.length;i++)n+=0===i?"?q="+encodeURI(t[i]):"&q="+encodeURI(t[i]);this.$axios.delete(n).then((function(t){e.$toast.success("删除成功！"),e.queryServices()})).catch((function(t){e.$toast.error(t.message)}))}}},u=l,d=(n("0167"),n("c701")),p=Object(d["a"])(u,i,s,!1,null,null,null);e["default"]=p.exports},"7a47":function(t,e,n){"use strict";function i(t,e){var n=document.querySelector(".vue-input-autowidth-mirror-".concat(t.dataset.uuid)),i={maxWidth:"none",minWidth:"none",comfortZone:0},s=Object.assign({},i,e.value);t.style.maxWidth=s.maxWidth,t.style.minWidth=s.minWidth;var a=t.value;a||(a=t.placeholder||"");while(n.childNodes.length)n.removeChild(n.childNodes[0]);n.appendChild(document.createTextNode(a));var r=n.scrollWidth+s.comfortZone+2;r!=t.scrollWidth&&(t.style.width="".concat(r,"px"))}n("917f");var s={bind:function(t){if("INPUT"!==t.tagName.toLocaleUpperCase())throw new Error("v-input-autowidth can only be used on input elements.");t.dataset.uuid=Math.random().toString(36).slice(-5),t.style.boxSizing="content-box"},inserted:function(t,e){var n=window.getComputedStyle(t);t.mirror=document.createElement("span"),Object.assign(t.mirror.style,{position:"absolute",top:"0",left:"0",visibility:"hidden",height:"0",overflow:"hidden",whiteSpace:"pre",fontSize:n.fontSize,fontFamily:n.fontFamily,fontWeight:n.fontWeight,fontStyle:n.fontStyle,letterSpacing:n.letterSpacing,textTransform:n.textTransform}),t.mirror.classList.add("vue-input-autowidth-mirror-".concat(t.dataset.uuid)),t.mirror.setAttribute("aria-hidden","true"),document.body.appendChild(t.mirror),i(t,e)},componentUpdated:function(t,e){i(t,e)},unbind:function(t){document.body.removeChild(t.mirror)}},a=function(t){t.directive("autowidth",s)};"undefined"!==typeof window&&window.Vue&&window.Vue.use(a),s.install=a,t.exports=s},"917f":function(t,e,n){"use strict";n("0ac3").polyfill()},c0cf:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ol",{staticClass:"breadcrumb breadcrumb-fixed"},[n("li",{staticClass:"breadcrumb-item"},[n("i",{staticClass:"fa",class:t.titleClass}),t._v(" "+t._s(t.title)+"\n    ")]),n("li",{staticClass:"ml-auto"},[t._t("default")],2)])},s=[],a={name:"vTitle",props:{title:String,titleClass:{type:String,default:""}}},r=a,o=n("c701"),c=Object(o["a"])(r,i,s,!1,null,null,null);e["a"]=c.exports},c9b1:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{on:{click:t.confirm}},[t._t("default")],2)},s=[],a={name:"delete",props:{title:{type:String,default:"确定？"},message:{type:String,default:"确定删除"}},methods:{confirm:function(){var t=this;this.$confirm(t.message,{title:t.title}).then((function(e){t.$emit("ok")})).catch((function(t){}))}}},r=a,o=n("c701"),c=Object(o["a"])(r,i,s,!1,null,null,null);e["a"]=c.exports}}]);
//# sourceMappingURL=chunk-63436670.aa07e506.js.map