{"version":3,"sources":["webpack:///./src/views/upstream/UpstreamEdit.vue?1269","webpack:///src/views/upstream/UpstreamEdit.vue","webpack:///./src/views/upstream/UpstreamEdit.vue?2f0d","webpack:///./src/views/upstream/UpstreamEdit.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","upstream","queries","length","_v","_l","q","staticClass","_s","_e","_m","directives","name","rawName","value","expression","staticStyle","on","$event","$$selectedVal","Array","prototype","filter","call","target","options","o","selected","map","val","_value","$set","multiple","domProps","composing","addServer","server","idx","servers","port","Number","weight","failTimeout","maxFails","removeServer","model","callback","$$v","modfiyUpstream","staticRenderFns","component"],"mappings":"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","file":"static/js/chunk-2d0e5bcf.14fd16fd.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-title',{attrs:{\"title\":\"编辑负载\"}},[(_vm.upstream.queries && _vm.upstream.queries.length > 0)?[_vm._v(\"\\n            搜索路径：\"),_vm._l((_vm.upstream.queries),function(q){return _c('span',{staticClass:\"badge badge-dark ml-1\"},[_vm._v(_vm._s(q))])})]:_vm._e()],2),_c('div',{staticClass:\"p-3\"},[_c('div',{staticClass:\"form-group\"},[_c('div',{staticClass:\"input-group\"},[_vm._m(0),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.upstream.protocol),expression:\"upstream.protocol\"}],staticClass:\"form-control\",staticStyle:{\"width\":\"140px\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.upstream, \"protocol\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',{attrs:{\"value\":\"http\"}},[_vm._v(\"HTTP\")]),_c('option',{attrs:{\"value\":\"tcp\"}},[_vm._v(\"TCP\")]),_c('option',{attrs:{\"value\":\"udp\"}},[_vm._v(\"UDP\")])]),_vm._m(1),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.upstream.name),expression:\"upstream.name\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.upstream.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.upstream, \"name\", $event.target.value)}}}),_vm._m(2),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.upstream.loadStrategy),expression:\"upstream.loadStrategy\"}],staticClass:\"form-control\",on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.upstream, \"loadStrategy\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',{attrs:{\"value\":\"\"}},[_vm._v(\"默认\")]),_c('option',{attrs:{\"value\":\"ip_hash\"}},[_vm._v(\"IP哈希（ip_hash）\")]),_c('option',{attrs:{\"value\":\"fair\"}},[_vm._v(\"页面大小、加载时间长短智能（fair）\")]),_c('option',{attrs:{\"value\":\"url_hash\"}},[_vm._v(\"URL哈希（url_hash）\")]),_c('option',{attrs:{\"value\":\"least_conn\"}},[_vm._v(\"最少连接（least_conn）\")]),_c('option',{attrs:{\"value\":\"least_time\"}},[_vm._v(\"最短时间（least_time）\")]),_c('option',{attrs:{\"value\":\"hash\"}},[_vm._v(\"哈希（hash）\")]),_c('option',{attrs:{\"value\":\"sticky\"}},[_vm._v(\"会话保持 (sticky)\")])])])]),_c('div',{staticClass:\"form-group\"},[_c('div',{staticClass:\"input-group\"},[_vm._m(3),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.upstream.commit),expression:\"upstream.commit\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.upstream.commit)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.upstream, \"commit\", $event.target.value)}}})])]),_c('table',{staticClass:\"table table-hover table-bordered\"},[_c('thead',{staticClass:\"thead-light\"},[_c('tr',[_c('td',{attrs:{\"colspan\":\"7\"}},[_vm._v(\"\\n                    负载\\n                    \"),_c('button',{staticClass:\"btn btn-sm btn-outline-danger pull-right\",on:{\"click\":_vm.addServer}},[_vm._v(\"\\n                        添加负载\\n                    \")])])]),_vm._m(4)]),_c('tbody',_vm._l((_vm.upstream.servers),function(server,idx){return _c('tr',[_c('td',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.upstream.servers[idx].host),expression:\"upstream.servers[idx].host\"}],staticClass:\"form-control\",attrs:{\"placeholder\":\"IP\",\"type\":\"text\"},domProps:{\"value\":(_vm.upstream.servers[idx].host)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.upstream.servers[idx], \"host\", $event.target.value)}}})]),_c('td',[_c('input',{staticClass:\"form-control\",attrs:{\"placeholder\":\"port\",\"type\":\"number\",\"max\":\"65535\",\"min\":\"1\"},domProps:{\"value\":_vm.upstream.servers[idx].port},on:{\"change\":function($event){_vm.upstream.servers[idx].port = Number($event.target.value)}}})]),_c('td',[_c('input',{staticClass:\"form-control\",attrs:{\"placeholder\":\"port\",\"type\":\"number\",\"min\":\"0\"},domProps:{\"value\":_vm.upstream.servers[idx].weight},on:{\"change\":function($event){_vm.upstream.servers[idx].weight = Number($event.target.value)}}})]),_c('td',[_c('input',{staticClass:\"form-control\",attrs:{\"placeholder\":\"port\",\"type\":\"number\",\"min\":\"0\"},domProps:{\"value\":_vm.upstream.servers[idx].failTimeout},on:{\"change\":function($event){_vm.upstream.servers[idx].failTimeout = Number($event.target.value)}}})]),_c('td',[_c('input',{staticClass:\"form-control\",attrs:{\"placeholder\":\"port\",\"type\":\"number\",\"min\":\"0\"},domProps:{\"value\":_vm.upstream.servers[idx].maxFails},on:{\"change\":function($event){_vm.upstream.servers[idx].maxFails = Number($event.target.value)}}})]),_c('td',[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.upstream.servers[idx].status),expression:\"upstream.servers[idx].status\"}],staticClass:\"form-control\",on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.upstream.servers[idx], \"status\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',{attrs:{\"value\":\"\"}},[_vm._v(\"无\")]),_c('option',{attrs:{\"value\":\"down\"}},[_vm._v(\"停用（down）\")]),_c('option',{attrs:{\"value\":\"backup\"}},[_vm._v(\"备用（backup）\")])])]),_c('td',[_c('button',{staticClass:\"btn btn-sm btn-danger\",on:{\"click\":function($event){return _vm.removeServer(idx)}}},[_vm._v(\"删除\\n                    \")])])])}),0)]),_c('HideCard',{attrs:{\"title\":\"额外参数\",\"show\":true}},[_c('Partamters',{model:{value:(_vm.upstream.parameters),callback:function ($$v) {_vm.$set(_vm.upstream, \"parameters\", $$v)},expression:\"upstream.parameters\"}})],1)],1),_c('div',{staticClass:\"d-flex justify-content-center\"},[_c('button',{staticClass:\"btn btn-primary\",on:{\"click\":_vm.modfiyUpstream}},[_vm._v(\"　确　定　\")]),_c('router-link',{staticClass:\"btn btn-default ml-3\",attrs:{\"to\":\"/admin/upstreams\"}},[_vm._v(\"　取　消　\")])],1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"input-group-prepend\"},[_c('span',{staticClass:\"input-group-text\"},[_vm._v(\"转发类型\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"input-group-prepend\"},[_c('span',{staticClass:\"input-group-text\"},[_vm._v(\"名称\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"input-group-prepend\"},[_c('span',{staticClass:\"input-group-text\"},[_vm._v(\"负载策略\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"input-group-prepend\"},[_c('span',{staticClass:\"input-group-text\"},[_vm._v(\"备注\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('tr',[_c('td',[_vm._v(\"IP\")]),_c('td',[_vm._v(\"端口\")]),_c('td',[_vm._v(\"权重\")]),_c('td',[_vm._v(\"失败等待时间(s)\")]),_c('td',[_vm._v(\"最大失败次数\")]),_c('td',[_vm._v(\"状态\")]),_c('td',{attrs:{\"width\":\"80px\"}},[_vm._v(\"操作\")])])}]\n\nexport { render, staticRenderFns }","<template>\n    <div>\n        <v-title title=\"编辑负载\">\n            <template v-if=\"upstream.queries && upstream.queries.length > 0\">\n                搜索路径：<span class=\"badge badge-dark ml-1\" v-for=\"q in upstream.queries\">{{ q }}</span>\n            </template>\n        </v-title>\n        <div class=\"p-3\">\n            <div class=\"form-group\">\n                <div class=\"input-group\">\n                    <div class=\"input-group-prepend\">\n                        <span class=\"input-group-text\">转发类型</span>\n                    </div>\n                    <select v-model=\"upstream.protocol\" style=\"width: 140px\" class=\"form-control\">\n                        <option value=\"http\">HTTP</option>\n                        <option value=\"tcp\">TCP</option>\n                        <option value=\"udp\">UDP</option>\n                    </select>\n\n                    <div class=\"input-group-prepend\">\n                        <span class=\"input-group-text\">名称</span>\n                    </div>\n                    <input v-model=\"upstream.name\" type=\"text\" class=\"form-control\"/>\n\n                    <div class=\"input-group-prepend\">\n                        <span class=\"input-group-text\">负载策略</span>\n                    </div>\n                    <select v-model=\"upstream.loadStrategy\" class=\"form-control\">\n                        <option value=\"\">默认</option>\n                        <option value=\"ip_hash\">IP哈希（ip_hash）</option>\n                        <option value=\"fair\">页面大小、加载时间长短智能（fair）</option>\n                        <option value=\"url_hash\">URL哈希（url_hash）</option>\n                        <option value=\"least_conn\">最少连接（least_conn）</option>\n                        <option value=\"least_time\">最短时间（least_time）</option>\n                        <option value=\"hash\">哈希（hash）</option>\n                        <option value=\"sticky\">会话保持 (sticky)</option>\n                    </select>\n                </div>\n            </div>\n\n            <div class=\"form-group\">\n                <div class=\"input-group\">\n                    <div class=\"input-group-prepend\">\n                        <span class=\"input-group-text\">备注</span>\n                    </div>\n                    <input v-model=\"upstream.commit\" type=\"text\" class=\"form-control\"/>\n                </div>\n            </div>\n\n            <table class=\"table table-hover table-bordered\">\n                <thead class=\"thead-light\">\n                <tr>\n                    <td colspan=\"7\">\n                        负载\n                        <button @click=\"addServer\"\n                                class=\"btn btn-sm btn-outline-danger pull-right\">\n                            添加负载\n                        </button>\n                    </td>\n                </tr>\n                <tr>\n                    <td>IP</td>\n                    <td>端口</td>\n                    <td>权重</td>\n                    <td>失败等待时间(s)</td>\n                    <td>最大失败次数</td>\n                    <td>状态</td>\n                    <td width=\"80px\">操作</td>\n                </tr>\n                </thead>\n                <tbody>\n                <tr v-for=\"(server,idx) in upstream.servers\">\n                    <td>\n                        <input v-model=\"upstream.servers[idx].host\"\n                               placeholder=\"IP\" type=\"text\" class=\"form-control\"/>\n                    </td>\n                    <td>\n                        <input :value=\"upstream.servers[idx].port\"\n                               @change=\"upstream.servers[idx].port = Number($event.target.value)\"\n                               placeholder=\"port\" type=\"number\" max=\"65535\" min=\"1\" class=\"form-control\"/>\n                    </td>\n                    <td>\n                        <input :value=\"upstream.servers[idx].weight\"\n                               @change=\"upstream.servers[idx].weight = Number($event.target.value)\"\n                               placeholder=\"port\" type=\"number\" min=\"0\" class=\"form-control\"/>\n                    </td>\n                    <td>\n                        <input :value=\"upstream.servers[idx].failTimeout\"\n                               @change=\"upstream.servers[idx].failTimeout = Number($event.target.value)\"\n                               placeholder=\"port\" type=\"number\" min=\"0\" class=\"form-control\"/>\n                    </td>\n                    <td>\n                        <input :value=\"upstream.servers[idx].maxFails\"\n                               @change=\"upstream.servers[idx].maxFails = Number($event.target.value)\"\n                               placeholder=\"port\" type=\"number\" min=\"0\" class=\"form-control\"/>\n                    </td>\n                    <td>\n                        <select v-model=\"upstream.servers[idx].status\" class=\"form-control\">\n                            <option value=\"\">无</option>\n                            <option value=\"down\">停用（down）</option>\n                            <option value=\"backup\">备用（backup）</option>\n                        </select>\n                    </td>\n                    <td>\n                        <button @click=\"removeServer(idx)\"\n                                class=\"btn btn-sm btn-danger\">删除\n                        </button>\n                    </td>\n                </tr>\n                </tbody>\n            </table>\n\n            <HideCard title=\"额外参数\" :show=\"true\">\n                <Partamters v-model=\"upstream.parameters\"/>\n            </HideCard>\n        </div>\n\n        <div class=\"d-flex justify-content-center\">\n            <button class=\"btn btn-primary\" @click=\"modfiyUpstream\">　确　定　</button>\n            <router-link to=\"/admin/upstreams\" class=\"btn btn-default ml-3\">　取　消　</router-link>\n        </div>\n    </div>\n</template>\n\n<script>\nimport VTitle from \"@/plugins/vTitle\";\nimport Partamters from \"@/views/server/Partamters\";\nimport HideCard from \"@/plugins/HideCard\";\nimport {codemirror} from 'vue-codemirror'\nimport 'codemirror/lib/codemirror.css'\nimport 'codemirror/theme/lesser-dark.css'\n\nexport default {\n    name: \"UpstreamEdit\",\n    components: {HideCard, Partamters, VTitle, codemirror},\n    data: () => ({\n        upstream: {},\n        cmOptions: {\n            tabSize: 4, theme: 'lesser-dark', mode: 'json',\n            line: true, lineWrapping: true, lineNumbers: true,\n            collapseIdentical: false, highlightDifferences: true\n        }\n    }),\n    mounted() {\n        if (this.$route.query.name) {\n            this.getUpstream();\n        } else {\n            this.upstream = {\n                \"queries\": [], \"name\": \"\", \"commit\": \"\",\n                \"protocol\": \"http\",\n                \"loadStrategy\": \"\",\n                \"servers\": [{\n                    \"host\": \"127.0.0.1\",\n                    \"port\": 8080,\n                    \"weight\": 0,\n                    \"failTimeout\": 0,\n                    \"maxFails\": 0,\n                    \"status\": \"\"\n                }],\n                \"parameters\": []\n            }\n        }\n    },\n    methods: {\n        getUpstream() {\n            let self = this;\n            let url = \"/admin/api/upstream?name=\" + self.$route.query.name;\n            self.$axios.get(url).then(res => {\n                self.upstream = res[0];\n            }).catch(e => {\n                self.$alert(e.message);\n            })\n        },\n        addServer() {\n            this.upstream.servers.push({\n                \"host\": \"\", \"port\": 8080,\n                \"weight\": 1, \"failTimeout\": 3, \"maxFails\": 3,\n                \"status\": \"\"\n            })\n        },\n        removeServer(idx) {\n            this.upstream.servers.splice(idx, 1)\n        },\n        modfiyUpstream() {\n            let self = this;\n            self.$axios.post(\"/admin/api/upstream\", this.upstream).then(res => {\n                self.$toast.success(\"更新成功！\")\n                self.$router.push({path: '/admin/upstreams'})\n            }).catch(e => {\n                self.$alert(e.message);\n            })\n        }\n    },\n    computed: {\n        upstreamString() {\n            return JSON.stringify(this.upstream, null, \"\\t\")\n        },\n    },\n}\n</script>\n","import mod from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.1@babel-loader/lib/index.js!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.5@vue-loader/lib/index.js??vue-loader-options!./UpstreamEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.1@babel-loader/lib/index.js!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.5@vue-loader/lib/index.js??vue-loader-options!./UpstreamEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UpstreamEdit.vue?vue&type=template&id=f1ac83ae&\"\nimport script from \"./UpstreamEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./UpstreamEdit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.5@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}