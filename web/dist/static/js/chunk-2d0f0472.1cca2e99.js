(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0f0472"],{"9c4f":function(t,a,i){"use strict";i.r(a);var s=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",[i("ol",{staticClass:"breadcrumb"},[i("li",{staticClass:"breadcrumb-fixed"},[i("router-link",{staticClass:"text-primary font-weight-bold",attrs:{to:"/admin/files"}},[i("i",{staticClass:"fa fa-home"}),t._v("文件目录：\n            ")])],1),t._l(t.paths,(function(a,s){return i("li",{staticClass:"breadcrumb-fixed text-primary font-weight-bold"},[i("router-link",{attrs:{to:{path:"/admin/files",query:{path:t.getPath(s)}}}},[t._v(t._s(a)+"/")])],1)}))],2),i("div",{staticClass:"animated fadeIn pl-3 pr-3 pt-3 row"},[i("div",{staticClass:"form-group col-12"},[i("div",{staticClass:"input-group"},[t._m(0),i("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"form-control",attrs:{type:"text",name:"program",placeholder:"匹配内容：*、*.conf、hosts.d/*.conf"},domProps:{value:t.search},on:{input:function(a){a.target.composing||(t.search=a.target.value)}}}),i("div",{staticClass:"input-group-append"},[i("button",{staticClass:"btn btn-sm btn-css3",on:{click:t.queryFiles}},[i("i",{staticClass:"fa fa-search"}),t._v("  搜  索  \n                    ")]),i("button",{staticClass:"btn btn-sm btn-primary text-white font-weight-bold",on:{click:function(a){return t.$router.push({path:"/admin/file/edit",query:{path:t.folder}})}}},[i("i",{staticClass:"fa fa-file-text"}),t._v(" 新建文件 \n                    ")])])])])]),i("div",{staticClass:"pl-4 pr-4"},[""===t.search?i("div",[i("div",{staticClass:"row"},t._l(t.showFiles,(function(a){return i("div",{staticClass:"col-auto"},[a.folder?i("div",{staticClass:"brand-card-body"},[i("router-link",{staticClass:"p-1",attrs:{to:{path:"/admin/files",query:{path:a.path}}}},[i("i",{staticClass:"fa fa-2x text-warning fa-folder"}),i("div",{staticClass:"text-wrap"},[t._v(t._s(a.name))])])],1):i("div",{staticClass:"brand-card-body"},[i("router-link",{staticClass:"p-1",attrs:{to:{path:"/admin/file/edit",query:{name:a.path}}}},[i("i",{staticClass:"fa fa-2x text-info fa-file"}),i("div",{staticClass:"text-wrap"},[t._v(t._s(a.name))])])],1)])})),0)]):i("div",{staticClass:" pt-1"},[i("div",{staticClass:"list-group"},t._l(t.files,(function(a,s){return i("a",{staticClass:"list-group-item list-group-item-action"},[i("i",{staticClass:"fa text-warning text-info fa-file"}),t._v(" "+t._s(a.name)+"\n                ")])})),0)])])])},e=[function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"input-group-prepend"},[i("span",{staticClass:"input-group-text bg-css3 text-white"},[t._v("文件查找")])])}],r=(i("8dee"),i("d91d"),i("a450"),i("fc02"),i("c0cf")),n=i("c9b1"),o=i("5df5"),l=i("8a2b"),c=(i("45b9"),i("4ede"),i("aeec"),{name:"Files",components:{Modal:o["a"],Delete:n["a"],VTitle:r["a"],codemirror:l["codemirror"]},data:function(){return{files:[],search:""}},mounted:function(){this.queryFiles()},computed:{folder:function(){var t=this.$route.query["path"];return void 0===t&&(t=""),t},paths:function(){var t=this.folder;return""!==t?t.split("/"):[]},showFiles:function(){var t=this.folder,a={},i=[];for(var s in this.files){var e=this.getFile(this.files[s]);if(e.dir===t&&i.push(e),""!==e.dir){var r=this.getFolder(e.dir,t);void 0!==r&&void 0===a[r.name]&&(i.unshift(r),a[r.name]=r)}}return i}},methods:{refresh:function(){this.queryFiles()},queryFiles:function(){this.startLoading();var t=this,a="/admin/api/file/search";""!==this.search&&(a+="?q="+encodeURI(this.search)),t.$axios.get(a).then((function(a){t.files=a})).catch((function(a){t.$toast.error(a.message)})).finally((function(){t.finishLoading()}))},getFile:function(t){var a=t.name.split("/");return{name:a.pop(),dir:a.join("/"),path:t.name,folder:!1}},getFolder:function(t,a){if(""===a){var i=t.split("/").shift();return{name:i,path:i,folder:!0}}if(0===t.indexOf(a+"/")&&t!==a){var s=t.replace(a+"/","").split("/").shift();return{name:s,path:a+"/"+s,folder:!0}}},getPath:function(t){return this.paths.slice(0,t+1).join("/")}}}),f=c,d=i("5d22"),u=Object(d["a"])(f,s,e,!1,null,null,null);a["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2d0f0472.1cca2e99.js.map