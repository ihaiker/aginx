(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ef1f628"],{"0677":function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},"0cb2":function(t,e,s){var r=s("597a"),a=s("d48a");t.exports=s("5e9e")?function(t,e,s){return r.f(t,e,a(1,s))}:function(t,e,s){return t[e]=s,t}},1374:function(t,e,s){"use strict";var r=s("bb8b"),a=s("5edc");t.exports=function(t,e,s){e in t?r.f(t,e,a(0,s)):t[e]=s}},"32ea":function(t,e,s){var r=s("8078"),a=s("93ca");s("b2be")("keys",(function(){return function(t){return a(r(t))}}))},"4a92":function(t,e,s){t.exports=!s("5e9e")&&!s("99fe")((function(){return 7!=Object.defineProperty(s("e7e0")("div"),"a",{get:function(){return 7}}).a}))},"537c":function(t,e,s){t.exports=s("f263")},"597a":function(t,e,s){var r=s("970b"),a=s("4a92"),n=s("5d61"),o=Object.defineProperty;e.f=s("5e9e")?Object.defineProperty:function(t,e,s){if(r(t),e=n(e,!0),r(s),a)try{return o(t,e,s)}catch(i){}if("get"in s||"set"in s)throw TypeError("Accessors not supported!");return"value"in s&&(t[e]=s.value),t}},"5cc8":function(t,e,s){},"5d61":function(t,e,s){var r=s("0677");t.exports=function(t,e){if(!r(t))return t;var s,a;if(e&&"function"==typeof(s=t.toString)&&!r(a=s.call(t)))return a;if("function"==typeof(s=t.valueOf)&&!r(a=s.call(t)))return a;if(!e&&"function"==typeof(s=t.toString)&&!r(a=s.call(t)))return a;throw TypeError("Can't convert object to primitive value")}},"5df5":function(t,e,s){"use strict";var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:t.transition,appear:""}},[t.show?s("div",{ref:"modal",staticClass:"modal fade show",style:t.getStyle,on:{mousedown:t.mouseDown}},[s("div",{staticClass:"modal-dialog",class:t.getClass,attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[t._t("modal-header",[t.title?s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title"},[t._v(t._s(t.title))]),s("a",{staticClass:"close",attrs:{"aria-label":"Close"},on:{click:function(e){return e.stopPropagation(),t.clickCloseBtn(e)}}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]):t._e()]),s("div",{staticClass:"modal-body p-0"},[t._t("default")],2),t._t("modal-footer",[s("div",{staticClass:"modal-footer"},[t.cancelButtonOptions.visible?s("button",{staticClass:"w-25",class:Object.assign({},t.cancelButtonOptions.btnClass),attrs:{type:"button","data-dismiss":"modal"},on:{click:function(e){return e.stopPropagation(),t.clickCloseBtn(e)}}},[t._v(t._s(t.cancelButtonOptions.title)+"\n                        ")]):t._e(),t.saveButtonOptions.visible?s("button",{staticClass:"w-25",class:Object.assign({},t.saveButtonOptions.btnClass),attrs:{type:"button"},on:{click:t.clickSaveBtn}},[t._v(t._s(t.saveButtonOptions.title)+"\n                        ")]):t._e()])])],2)])]):t._e()])},a=[],n=(s("ac67"),s("1bc7"),s("32ea"),s("537c")),o=s.n(n);function i(t,e,s){return e in t?o()(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function c(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,r)}return s}function l(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?c(Object(s),!0).forEach((function(e){i(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var u={count:0},p={name:"modal",props:{show:Boolean,title:String,modalClass:{type:Object,default:null},hasBackdrop:{type:Boolean,default:!0},saveButton:{type:Object,default:function(){return{}}},cancelButton:{type:Object,default:function(){return{}}},transition:{type:String,default:"translate-fade"},closeOnEscape:{type:Boolean,default:!0}},data:function(){return{isShow:this.show,backdrop:null,zIndex:0,modals:u}},mounted:function(){this.show&&(u.count++,this.zIndex=u.count,this.$emit("show",!0,this.zIndex,u.count)),this.checkBackdrop()},destroyed:function(){this.show&&(u.count--,this.zIndex=u.count,this.$emit("show",!1,this.zIndex,u.count)),this.backdrop&&this.show&&document.body.removeChild(this.backdrop),0===u.count&&document.body.classList.remove("modal-open")},methods:{clickCloseBtn:function(){this.$emit("cancel")},clickSaveBtn:function(){this.$emit("ok")},handleEscape:function(t){this.show&&27===t.keyCode&&this.zIndex===this.totalModals&&this.$emit("close")},mouseDown:function(t){this.$refs.modal===t.target&&(this.$emit("close"),t.preventDefault())},checkBackdrop:function(){this.hasBackdrop&&(this.show&&1===this.zIndex?document.body.classList.add("modal-open"):!this.show&&(this.zIndex,this.totalModals),this.show?(this.backdrop=document.createElement("div"),this.backdrop.classList.add("modal-backdrop","fade","show"),this.backdrop.style.zIndex=1048+2*this.zIndex,document.body.appendChild(this.backdrop)):this.backdrop&&(document.body.removeChild(this.backdrop),document.body.classList.remove("modal-open")))}},computed:{totalModals:function(){return u.count},getStyle:function(){var t={};return this.show&&(t.display="block"),t["z-index"]=1048+2*this.zIndex+1,t},getClass:function(){var t={},e=this.totalModals-this.zIndex;return t["modal-stack-"+e]=!0,t["modal-order-"+this.zIndex]=!0,t.aside=this.zIndex!==this.totalModals,l(l({},t),this.modalClass)},saveButtonOptions:function(){var t={title:"确定",visible:!0,btnClass:{"btn btn-primary":!0}};return l(l({},t),this.saveButton)},cancelButtonOptions:function(){var t={title:"取消",visible:!0,btnClass:{"btn btn-outline-secondary":!0}};return l(l({},t),this.cancelButton)}},watch:{show:function(t){t?u.count++:u.count--,this.zIndex=u.count,this.$emit("show",t,this.zIndex,u.count),t||0!==u.count||document.body.classList.remove("modal-open"),this.checkBackdrop()},closeOnEscape:{handler:function(t){"undefined"!==typeof document&&(t?document.addEventListener("keydown",this.handleEscape):document.removeEventListener("keydown",this.handleEscape))},immediate:!0}}},v=p,d=(s("cbb6"),s("5d22")),f=Object(d["a"])(v,r,a,!1,null,"0d2e2f80",null);e["a"]=f.exports},"5e9e":function(t,e,s){t.exports=!s("99fe")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},"6d20":function(t,e,s){"use strict";s("9b9e")},"728a":function(t,e,s){var r=s("96d8");t.exports=function(t,e,s){if(r(t),void 0===e)return t;switch(s){case 1:return function(s){return t.call(e,s)};case 2:return function(s,r){return t.call(e,s,r)};case 3:return function(s,r,a){return t.call(e,s,r,a)}}return function(){return t.apply(e,arguments)}}},"7c2b":function(t,e,s){var r=s("a4cf"),a=s("ce99"),n=s("728a"),o=s("0cb2"),i=s("dce3"),c="prototype",l=function(t,e,s){var u,p,v,d=t&l.F,f=t&l.G,m=t&l.S,h=t&l.P,b=t&l.B,g=t&l.W,C=f?a:a[e]||(a[e]={}),_=C[c],x=f?r:m?r[e]:(r[e]||{})[c];for(u in f&&(s=e),s)p=!d&&x&&void 0!==x[u],p&&i(C,u)||(v=p?x[u]:s[u],C[u]=f&&"function"!=typeof x[u]?s[u]:b&&p?n(v,r):g&&x[u]==v?function(t){var e=function(e,s,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,s)}return new t(e,s,r)}return t.apply(this,arguments)};return e[c]=t[c],e}(v):h&&"function"==typeof v?n(Function.call,v):v,h&&((C.virtual||(C.virtual={}))[u]=v,t&l.R&&_&&!_[u]&&o(_,u,v)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},"96d8":function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},"970b":function(t,e,s){var r=s("0677");t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},"99fe":function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},"9b9e":function(t,e,s){},a4cf:function(t,e){var s=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=s)},ac67:function(t,e,s){var r=s("e99b"),a=s("e7c8"),n=s("3471"),o=s("285b"),i=s("1374");r(r.S,"Object",{getOwnPropertyDescriptors:function(t){var e,s,r=n(t),c=o.f,l=a(r),u={},p=0;while(l.length>p)s=c(r,e=l[p++]),void 0!==s&&i(u,e,s);return u}})},b2be:function(t,e,s){var r=s("e99b"),a=s("76e3"),n=s("0926");t.exports=function(t,e){var s=(a.Object||{})[t]||Object[t],o={};o[t]=e(s),r(r.S+r.F*n((function(){s(1)})),"Object",o)}},cbb6:function(t,e,s){"use strict";s("5cc8")},ce99:function(t,e){var s=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=s)},d48a:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},dce3:function(t,e){var s={}.hasOwnProperty;t.exports=function(t,e){return s.call(t,e)}},e496:function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-title",{attrs:{title:"编辑服务","title-class":"icons cui-puzzle"}},[t.server.queries&&t.server.queries.length>0?[t._v("\n            搜索路径："),t._l(t.server.queries,(function(e){return s("span",{staticClass:"badge badge-dark ml-1"},[t._v(t._s(e))])}))]:t._e()],2),s("div",{staticClass:"p-3"},[s("ServerListens",{model:{value:t.server,callback:function(e){t.server=e},expression:"server"}}),"http"===t.server.protocol?s("ServerName",{model:{value:t.server,callback:function(e){t.server=e},expression:"server"}}):t._e(),s("div",{staticClass:"form-group"},[s("div",{staticClass:"input-group"},[t._m(0),s("input",{directives:[{name:"model",rawName:"v-model",value:t.server.commit,expression:"server.commit"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.server.commit},on:{input:function(e){e.target.composing||t.$set(t.server,"commit",e.target.value)}}}),void 0===t.$route.query.name||"http"!==t.server.protocol?[t._m(1),s("select",{directives:[{name:"model",rawName:"v-model",value:t.server.protocol,expression:"server.protocol"}],staticClass:"form-control",on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.server,"protocol",e.target.multiple?s:s[0])},function(e){return t.setServerProtocol(e.target.value)}]}},[void 0===t.$route.query.name?s("option",{attrs:{value:"http"}},[t._v("HTTP\n                        ")]):t._e(),s("option",{attrs:{value:"tcp"}},[t._v("TCP")]),s("option",{attrs:{value:"udp"}},[t._v("UDP")])])]:t._e()],2)]),"http"===t.server.protocol?s("ServerSSL",{model:{value:t.server,callback:function(e){t.server=e},expression:"server"}}):t._e(),s("ServerLocations",{model:{value:t.server,callback:function(e){t.server=e},expression:"server"}}),s("HideCard",{attrs:{title:"额外参数"}},[s("Partamters",{attrs:{prompt:"server"},model:{value:t.server.parameters,callback:function(e){t.$set(t.server,"parameters",e)},expression:"server.parameters"}}),s("hr"),"http"===t.server.protocol?s("BasicAuth",{model:{value:t.server,callback:function(e){t.server=e},expression:"server"}}):t._e(),"http"===t.server.protocol?s("RewriteMobile",{model:{value:t.server,callback:function(e){t.server=e},expression:"server"}}):t._e(),s("AllowDeny",{model:{value:t.server,callback:function(e){t.server=e},expression:"server"}})],1),s("div",{staticClass:"d-flex justify-content-center"},[s("button",{staticClass:"btn btn-css3",on:{click:t.modfiyServer}},[t._v("\n                确定更新\n            ")]),s("router-link",{staticClass:"btn btn-default ml-3",attrs:{to:"/admin/servers"},on:{click:function(t){}}},[t._v("\n                取　　消\n            ")])],1)],1)],1)},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-group-prepend"},[s("span",{staticClass:"input-group-text"},[t._v("备注")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-group-prepend"},[s("span",{staticClass:"input-group-text"},[t._v("转发类型")])])}],n=(s("a450"),s("c0cf")),o=s("8a2b"),i=(s("4ede"),s("aeec"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"form-group"},[s("div",{staticClass:"input-group"},[s("div",{staticClass:"input-group-prepend"},[s("button",{staticClass:"btn btn-default",on:{click:t.switchSupport}},[t._v("\n                    开始自动转向手机端:\n                    "),s("i",{staticClass:"fa",class:t.support?"fa-check-circle text-success":"fa-square-o"})])]),t._m(0),t.support?[t._m(1),s("input",{directives:[{name:"model",rawName:"v-model",value:t.server.rewriteMobile.domain,expression:"server.rewriteMobile.domain"}],staticClass:"form-control",attrs:{placeholder:"转向地址",type:"text"},domProps:{value:t.server.rewriteMobile.domain},on:{input:function(e){e.target.composing||t.$set(t.server.rewriteMobile,"domain",e.target.value)}}})]:t._e()],2)]),t.support?s("div",{staticClass:"form-group"},[s("label",{staticClass:"form-col-form-label",attrs:{for:"inputSuccess1"}},[t._v("手机端匹配agents")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.server.rewriteMobile.agents,expression:"server.rewriteMobile.agents"}],staticClass:"form-control is-valid",staticStyle:{height:"140px"},domProps:{value:t.server.rewriteMobile.agents},on:{input:function(e){e.target.composing||t.$set(t.server.rewriteMobile,"agents",e.target.value)}}})]):t._e()])}),c=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-group-append"},[s("div",{staticClass:"input-group-text"},[t._v("\n                    开启后手机访问网页将自动转向手机网页\n                ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-group-prepend"},[s("span",{staticClass:"input-group-text btn-default"},[t._v("转向地址：")])])}],l={name:"RewriteMobile",model:{prop:"server",event:"change"},props:["server"],computed:{support:function(){return void 0!==this.server.rewriteMobile}},methods:{switchSupport:function(){this.support?this.$delete(this.server,"rewriteMobile"):this.$set(this.server,"rewriteMobile",{agents:'"(MIDP)|(WAP)|(UP.Browser)|(Smartphone)|(Obigo)|(Mobile)|(AU.Browser)|(wxd.Mms)|(WxdB.Browser)|(CLDC)|(UP.Link)|(KM.Browser)|(UCWEB)|(SEMC-Browser)|(Mini)|(Symbian)|(Palm)|(Nokia)|(Panasonic)|(MOT-)|(SonyEricsson)|(NEC-)|(Alcatel)|(Ericsson)|(BENQ)|(BenQ)|(Amoisonic)|(Amoi-)|(Capitel)|(PHILIPS)|(SAMSUNG)|(Lenovo)|(Mitsu)|(Motorola)|(SHARP)|(WAPPER)|(LG-)|(LG/)|(EG900)|(CECT)|(Compal)|(kejian)|(Bird)|(BIRD)|(G900/V1.0)|(Arima)|(CTL)|(TDG)|(Daxian)|(DAXIAN)|(DBTEL)|(Eastcom)|(EASTCOM)|(PANTECH)|(Dopod)|(Haier)|(HAIER)|(KONKA)|(KEJIAN)|(LENOVO)|(Soutec)|(SOUTEC)|(SAGEM)|(SEC-)|(SED-)|(EMOL-)|(INNO55)|(ZTE)|(iPhone)|(Android)|(Windows CE)|(Wget)|(Java)|(curl)|(Opera)"',domain:""})}}},u=l,p=s("5d22"),v=Object(p["a"])(u,i,c,!1,null,null,null),d=v.exports,f=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form-group"},[s("div",{staticClass:"input-group"},[s("div",{staticClass:"input-group-prepend"},[s("button",{staticClass:"btn btn-default",on:{click:t.basicAuthSwitch}},[t._v("\n                开启BasicAuth:\n                "),s("i",{staticClass:"fa",class:t.isBasicAuth?"fa-check-circle text-success":"fa-square-o"})])]),t.isBasicAuth?[t._m(0),s("select",{directives:[{name:"model",rawName:"v-model",value:t.data.authBasic.userFile,expression:"data.authBasic.userFile"}],staticClass:"form-control",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.data.authBasic,"userFile",e.target.multiple?s:s[0])}}},t._l(t.authFiles,(function(e){return s("option",{domProps:{value:e.name}},[t._v(t._s(e.name))])})),0)]:t._e()],2)])},m=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-group-prepend"},[s("span",{staticClass:"input-group-text"},[t._v("认证文件")])])}],h={name:"BasicAuth",model:{prop:"data",event:"change"},props:["data"],data:function(){return{authFiles:[]}},mounted:function(){this.queryBasicAuthFile()},computed:{isBasicAuth:function(){return!!this.data.authBasic&&"on"===this.data.authBasic.switch}},methods:{queryBasicAuthFile:function(){var t=this;t.$axios.get("/admin/api/file/search?q="+encodeURI("auths/*")).then((function(e){t.authFiles=e})).catch((function(e){t.$alert("查询失败："+e.message)}))},basicAuthSwitch:function(){this.isBasicAuth?this.$delete(this.data,"authBasic"):this.$set(this.data,"authBasic",{switch:"on",userFile:""})}}},b=h,g=Object(p["a"])(b,f,m,!1,null,"678915ec",null),C=g.exports,_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.ssl?s("div",{staticClass:"card card-accent-primary"},[s("div",{staticClass:"card-header"},[t._v("\n        SSL信息\n    ")]),s("div",{staticClass:"card-body"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-auto"},[s("button",{staticClass:"btn btn-default",on:{click:function(e){t.server.ssl.httpRedirect=!t.server.ssl.httpRedirect}}},[t._v("\n                    HTTP 301跳转HTTPS:\n                    "),s("i",{staticClass:"fa",class:t.server.ssl.httpRedirect?"fa-check-circle text-success":"fa-square-o"})])]),s("div",{staticClass:"col-auto"},[s("SSLProtocols",{model:{value:t.server.ssl.protocols,callback:function(e){t.$set(t.server.ssl,"protocols",e)},expression:"server.ssl.protocols"}})],1)]),s("div",{staticClass:"form-group mb-0"},[s("div",{staticClass:"input-group"},[t._m(0),s("input",{directives:[{name:"model",rawName:"v-model",value:this.server.ssl.certificate,expression:"this.server.ssl.certificate"}],staticClass:"form-control",attrs:{placeholder:"证书文件（PEM）",type:"text",readonly:"readonly"},domProps:{value:this.server.ssl.certificate},on:{input:function(e){e.target.composing||t.$set(this.server.ssl,"certificate",e.target.value)}}}),t._m(1),s("input",{directives:[{name:"model",rawName:"v-model",value:this.server.ssl.certificateKey,expression:"this.server.ssl.certificateKey"}],staticClass:"form-control",attrs:{placeholder:"证书文件（key）",type:"text",readonly:"readonly"},domProps:{value:this.server.ssl.certificateKey},on:{input:function(e){e.target.composing||t.$set(this.server.ssl,"certificateKey",e.target.value)}}}),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-css3",on:{click:t.queryCerts}},[s("i",{staticClass:"fa fa-folder-open"}),t._v(" 选择\n                    ")])])])]),s("Modal",{attrs:{show:null!==t.certs,title:"选择证书"},on:{ok:function(e){t.certs=null},cancel:function(e){t.certs=null}}},[s("div",{staticClass:"overflow-auto",staticStyle:{"max-height":"400px"}},[s("table",{staticClass:"table table-hover table-bordered mb-0"},[s("thead",[s("tr",[s("th",[t._v("域名")]),s("th",[t._v("过期时间")]),s("th",[t._v("操作")])])]),s("tbody",t._l(t.certs,(function(e,r){return s("tr",[s("td",[t._v(t._s(e.domain))]),s("td",[t._v(t._s(t.expireTime(e.expireTime)))]),s("td",[s("button",{staticClass:"btn btn-sm btn-outline-dark",on:{click:function(s){return t.useCert(e)}}},[t._v("选择\n                            ")])])])})),0)])])])],1)]):t._e()},x=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-group-prepend"},[s("span",{staticClass:"input-group-text"},[t._v("证书文件(crt)：")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-group-prepend"},[s("span",{staticClass:"input-group-text"},[t._v("私钥文件(key)：")])])}],y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form-group"},[s("div",{staticClass:"input-group"},[t._m(0),t._l(t.protocols,(function(e){return s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-default",on:{click:function(s){return t.setSupport(e)}}},[s("i",{staticClass:"fa",class:t.isSupport(e)?"fa-check-circle text-success":"fa-square-o"}),t._v("\n                "+t._s(e)+"\n            ")])])}))],2)])},w=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-group-prepend"},[s("span",{staticClass:"input-group-text"},[t._v("HTTPS支持协议")])])}],k=(s("fc02"),{name:"SSLProtocols",data:function(){return{protocols:["SSLv2","SSLv3","TLSv1","TLSv1.1","TLSv1.2","TLSv1.3"]}},model:{prop:"value",event:"change"},props:["value"],computed:{supports:function(){return this.value.split(" ")}},methods:{isSupport:function(t){for(var e=0;e<this.supports.length;e++)if(this.supports[e]===t)return!0;return!1},setSupport:function(t){if(this.isSupport(t)){for(var e="",s=0;s<this.supports.length;s++)t!==this.supports[s]&&(e+=this.supports[s]+" ");this.value=e.trim()}else this.value=this.value+(""===this.value.trim()?"":" ")+t;this.$emit("change",this.value)}}}),S=k,$=Object(p["a"])(S,y,w,!1,null,null,null),P=$.exports,O=s("5df5"),E={name:"ServerSSL",components:{Modal:O["a"],SSLProtocols:P},model:{prop:"server",event:"change"},props:["server"],data:function(){return{certs:null}},computed:{ssl:function(){if(this.server.listens)for(var t=0;t<this.server.listens.length;t++)if(this.server.listens[t].ssl)return!0;return!1}},watch:{ssl:function(t,e){t?this.$set(this.server,"ssl",{httpRedirect:!1,protocols:"TLSv1 TLSv1.1 TLSv1.2",certificate:"",certificateKey:""}):this.$delete(this.server,"ssl")}},methods:{expireTime:function(t){return t.substr(0,10)+" "+t.substr(11,8)},queryCerts:function(){var t=this;t.$axios.get("/admin/api/cert/list").then((function(e){t.certs=e})).catch((function(e){t.$alert("查询证书异常："+e.message)}))},useCert:function(t){this.server.ssl.certificate=t.certificate,this.server.ssl.certificateKey=t.privateKey,this.certs=null}}},B=E,A=Object(p["a"])(B,_,x,!1,null,"41d1d79f",null),L=A.exports,j=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form-group form-inline"},[s("div",{staticClass:"input-group"},[t._m(0),t._l(t.server.listens,(function(e,r){return[s("input",{directives:[{name:"model",rawName:"v-model",value:t.server.listens[r].host,expression:"server.listens[idx].host"}],staticClass:"form-control",attrs:{type:"text",placeholder:"IP地址"},domProps:{value:t.server.listens[r].host},on:{input:function(e){e.target.composing||t.$set(t.server.listens[r],"host",e.target.value)}}}),s("input",{staticClass:"form-control",attrs:{type:"number",placeholder:"PORT"},domProps:{value:t.server.listens[r].port},on:{change:function(e){t.server.listens[r].port=Number(e.target.value)}}}),"http"===t.server.protocol?[s("div",{staticClass:"input-group-prepend"},[s("button",{staticClass:"btn btn-default",on:{click:function(t){e.default=!e.default}}},[s("i",{staticClass:"fa",class:e.default?"fa-check-square text-success":"fa-square-o"}),t._v("\n                        默认\n                    ")])]),s("div",{staticClass:"input-group-prepend"},[s("button",{staticClass:"btn btn-default",on:{click:function(t){e.http2=!e.http2}}},[s("i",{staticClass:"fa",class:e.http2?"fa-check-square text-success":"fa-square-o"}),t._v("\n                        HTTP2\n                    ")])]),s("div",{staticClass:"input-group-prepend"},[s("button",{staticClass:"btn btn-default",on:{click:function(t){e.ssl=!e.ssl}}},[s("i",{staticClass:"fa",class:e.ssl?"fa-check-square text-success":"fa-square-o"}),t._v("\n                        SSL\n                    ")])])]:t._e(),t.server.listens.length>1?s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.server.listens.splice(r,1)}}},[s("i",{staticClass:"fa fa-trash"})])]):t._e()]})),s("div",{staticClass:"input-group-append",on:{click:function(e){return t.server.listens.push({host:"",port:8080,default:!1,http2:!1,ssl:!1})}}},[t._m(1)])],2)])},M=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-group-prepend"},[s("span",{staticClass:"input-group-text"},[t._v("监听地址")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"btn btn-css3"},[s("i",{staticClass:"fa fa-plus"})])}],T={name:"ServerListens",model:{prop:"server",event:"change"},props:["server"]},q=T,N=Object(p["a"])(q,j,M,!1,null,null,null),I=N.exports,D=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form-group form-inline"},[s("div",{staticClass:"input-group"},[t._m(0),t._l(t.server.domains,(function(e,r){return[s("input",{directives:[{name:"model",rawName:"v-model",value:t.server.domains[r],expression:"server.domains[idx]"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.server.domains[r]},on:{input:function(e){e.target.composing||t.$set(t.server.domains,r,e.target.value)}}}),t.server.domains.length>1?s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.server.domains.splice(r,1)}}},[s("i",{staticClass:"fa fa-trash"})])]):t._e()]})),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-css3",on:{click:function(e){return t.server.domains.push("")}}},[s("i",{staticClass:"fa fa-plus"})])])],2)])},z=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-group-prepend"},[s("span",{staticClass:"input-group-text"},[t._v("域名")])])}],H={name:"ServerName",model:{prop:"server",event:"change"},props:["server"]},R=H,F=Object(p["a"])(R,D,z,!1,null,"3c52528c",null),U=F.exports,K=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form-inline"},[s("div",{staticClass:"form-group mb-0"},[s("div",{staticClass:"input-group"},[t._m(0),t._l(t.data.allows,(function(e,r){return[s("input",{directives:[{name:"model",rawName:"v-model",value:t.data.allows[r],expression:"data.allows[idx]"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.data.allows[r]},on:{input:function(e){e.target.composing||t.$set(t.data.allows,r,e.target.value)}}}),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.data.allows.splice(r,1)}}},[s("i",{staticClass:"fa fa-trash"})])])]})),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-css3",on:{click:function(e){return t.appendOne("allows",t.localIP)}}},[s("i",{staticClass:"fa fa-plus"})])]),t._m(1),t._l(t.data.denys,(function(e,r){return[s("input",{directives:[{name:"model",rawName:"v-model",value:t.data.denys[r],expression:"data.denys[idx]"}],staticClass:"form-control",attrs:{width:"120px",type:"text"},domProps:{value:t.data.denys[r]},on:{input:function(e){e.target.composing||t.$set(t.data.denys,r,e.target.value)}}}),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.data.denys.splice(r,1)}}},[s("i",{staticClass:"fa fa-trash"})])])]})),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-css3",on:{click:function(e){return t.appendOne("denys","all")}}},[s("i",{staticClass:"fa fa-plus"})])])],2)])])},W=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-group-prepend"},[s("span",{staticClass:"input-group-text"},[t._v("Allow")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-group-prepend"},[s("span",{staticClass:"input-group-text"},[t._v("Deny")])])}],G={name:"AllowDeny",model:{prop:"data",event:"change"},props:["data"],data:function(){return{localIP:""}},mounted:function(){this.queryLocal()},methods:{queryLocal:function(){},appendOne:function(t,e){void 0!==this.data[t]&&null!==this.data[t]||this.$set(this.data,t,[]),this.data[t].push(e)}}},J=G,V=Object(p["a"])(J,K,W,!1,null,null,null),Q=V.exports,X=function(){var t=this,e=t.$createElement,s=t._self._c||e;return"http"===t.server.protocol?s("div",{staticClass:"card card-accent-primary"},[s("div",{staticClass:"card-header"},[t._v("\n        代理地址(location)\n        "),s("div",{staticClass:"card-header-actions"},[s("div",{staticClass:"card-header-action btn-minimize text-dark",on:{click:t.addLocation}},[s("i",{staticClass:"fa fa-plus"}),t._v("\n                添加代理路径\n            ")])])]),s("table",{staticClass:"table table-hover mb-0"},[t._m(0),t._l(t.server.locations,(function(e,r){return"http"===t.server.protocol?[s("tr",[s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.server.locations[r].path,expression:"server.locations[idx].path"}],staticClass:"form-control",class:{"is-invalid":""===t.server.locations[r].path},attrs:{placeholder:"路径",type:"text"},domProps:{value:t.server.locations[r].path},on:{input:function(e){e.target.composing||t.$set(t.server.locations[r],"path",e.target.value)}}})]),s("td",[s("select",{directives:[{name:"model",rawName:"v-model",value:t.server.locations[r].type,expression:"server.locations[idx].type"}],staticClass:"form-control",on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.server.locations[r],"type",e.target.multiple?s:s[0])},function(e){return t.changeType(r)}]}},[s("option",{attrs:{value:"html"}},[t._v("静态文件")]),s("option",{attrs:{value:"upstream"}},[t._v("负载均衡")]),s("option",{attrs:{value:"http"}},[t._v("动态代理")]),s("option",{attrs:{value:"custom",selected:""}},[t._v("用户定义")])])]),s("td",["html"===t.server.locations[r].type?[s("div",{staticClass:"form-group mb-0"},[s("div",{staticClass:"input-group"},[s("div",{staticClass:"input-group-prepend"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.server.locations[r].html.model,expression:"server.locations[idx].html.model"}],staticClass:"form-control",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.server.locations[r].html,"model",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"root",selected:""}},[t._v("ROOT模式")]),s("option",{attrs:{value:"alias"}},[t._v("Alias模式")])])]),t._m(1,!0),s("input",{directives:[{name:"model",rawName:"v-model",value:t.server.locations[r].html.path,expression:"server.locations[idx].html.path"}],staticClass:"form-control",class:{"is-invalid":""===t.server.locations[r].html.path},attrs:{placeholder:"路径",type:"text"},domProps:{value:t.server.locations[r].html.path},on:{input:function(e){e.target.composing||t.$set(t.server.locations[r].html,"path",e.target.value)}}}),t._m(2,!0),s("input",{directives:[{name:"model",rawName:"v-model",value:t.server.locations[r].html.indexes,expression:"server.locations[idx].html.indexes"}],staticClass:"form-control",class:{"is-invalid":""===t.server.locations[r].html.indexes},attrs:{placeholder:"主页",type:"text"},domProps:{value:t.server.locations[r].html.indexes},on:{input:function(e){e.target.composing||t.$set(t.server.locations[r].html,"indexes",e.target.value)}}})])])]:"upstream"===t.server.locations[r].type?[s("div",{staticClass:"form-group mb-0"},[s("div",{staticClass:"input-group"},[t._m(3,!0),s("div",{staticClass:"input-group-append"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.server.locations[r].upstream.name,expression:"server.locations[idx].upstream.name"}],staticClass:"form-control",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.server.locations[r].upstream,"name",e.target.multiple?s:s[0])}}},t._l(t.upstreams,(function(e){return"http"===e.protocol?s("option",{domProps:{value:e.name}},[""!==e.commit?[t._v("\n                                                "+t._s(e.commit)+" ("+t._s(e.name)+")\n                                            ")]:[t._v("\n                                                "+t._s(e.name)+"\n                                            ")]],2):t._e()})),0)]),t._m(4,!0),s("input",{directives:[{name:"model",rawName:"v-model",value:t.server.locations[r].upstream.path,expression:"server.locations[idx].upstream.path"}],staticClass:"form-control",attrs:{placeholder:"额外地址",type:"text"},domProps:{value:t.server.locations[r].upstream.path},on:{input:function(e){e.target.composing||t.$set(t.server.locations[r].upstream,"path",e.target.value)}}}),s("div",{staticClass:"input-group-prepend"},[s("button",{staticClass:"btn btn-default",on:{click:function(e){t.server.locations[r].basicHeader=!t.server.locations[r].basicHeader}}},[s("i",{staticClass:"fa",class:t.server.locations[r].basicHeader?"fa-check-square text-success":"fa-square-o"}),t._v("\n                                        基础header\n                                    ")])]),s("div",{staticClass:"input-group-prepend"},[s("button",{staticClass:"btn btn-default",on:{click:function(e){t.server.locations[r].webSocket=!t.server.locations[r].webSocket}}},[s("i",{staticClass:"fa",class:t.server.locations[r].webSocket?"fa-check-square text-success":"fa-square-o"}),t._v("\n                                        WebSocket\n                                    ")])])])])]:"http"===t.server.locations[r].type?[s("div",{staticClass:"form-group mb-0"},[s("div",{staticClass:"input-group"},[t._m(5,!0),s("input",{directives:[{name:"model",rawName:"v-model",value:t.server.locations[r].http.to,expression:"server.locations[idx].http.to"}],staticClass:"form-control",class:{"is-invalid":""===t.server.locations[r].http.to},attrs:{placeholder:"代理地址",type:"text"},domProps:{value:t.server.locations[r].http.to},on:{input:function(e){e.target.composing||t.$set(t.server.locations[r].http,"to",e.target.value)}}}),s("div",{staticClass:"input-group-prepend"},[s("button",{staticClass:"btn btn-default",on:{click:function(e){t.server.locations[r].basicHeader=!t.server.locations[r].basicHeader}}},[s("i",{staticClass:"fa",class:t.server.locations[r].basicHeader?"fa-check-square text-success":"fa-square-o"}),t._v("\n                                        基础header\n                                    ")])]),s("div",{staticClass:"input-group-prepend"},[s("button",{staticClass:"btn btn-default",on:{click:function(e){t.server.locations[r].webSocket=!t.server.locations[r].webSocket}}},[s("i",{staticClass:"fa",class:t.server.locations[r].webSocket?"fa-check-square text-success":"fa-square-o"}),t._v("\n                                        WebSocket\n                                    ")])])])])]:void 0],2),s("td",{staticClass:"d-flex justify-content-around"},[s("button",{staticClass:"btn btn-sm btn-css3",attrs:{title:"额外参数"},on:{click:function(e){return t.showParamIdx(r)}}},[s("i",{staticClass:"fa fa-align-justify"})]),s("button",{staticClass:"btn btn-sm btn-success",attrs:{disabled:0===r,title:"上移动"},on:{click:function(e){return t.moveUp(r)}}},[s("i",{staticClass:"fa fa-arrow-up"})]),s("button",{staticClass:"btn btn-sm btn-danger",attrs:{title:"删除"},on:{click:function(e){return t.delLoc(r)}}},[s("i",{staticClass:"fa fa-trash"})])])]),t.showParams===r?s("tr",[s("td",{staticClass:"p-3",attrs:{colspan:"4"}},[s("Partamters",{attrs:{prompt:"location"},model:{value:t.server.locations[r].parameters,callback:function(e){t.$set(t.server.locations[r],"parameters",e)},expression:"server.locations[idx].parameters"}}),s("hr"),s("BasicAuth",{staticClass:"mt-2",model:{value:t.server.locations[r],callback:function(e){t.$set(t.server.locations,r,e)},expression:"server.locations[idx]"}}),s("AllowDeny",{model:{value:t.server.locations[r],callback:function(e){t.$set(t.server.locations,r,e)},expression:"server.locations[idx]"}})],1)]):t._e()]:t._e()}))],2)]):s("div",{staticClass:"form-group"},[s("div",{staticClass:"input-group"},[t._m(6),s("select",{directives:[{name:"model",rawName:"v-model",value:t.server.proxyPass,expression:"server.proxyPass"}],staticClass:"form-control",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.server,"proxyPass",e.target.multiple?s:s[0])}}},t._l(t.upstreams,(function(e){return"tcp"===e.protocol?s("option",{domProps:{value:e.name}},[""!==e.commit?[t._v("\n                    "+t._s(e.commit)+" ("+t._s(e.name)+")\n                ")]:[t._v("\n                    "+t._s(e.name)+"\n                ")]],2):t._e()})),0)])])},Z=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("th",{staticStyle:{width:"220px"}},[t._v("路径")]),s("th",{staticStyle:{width:"120px"}},[t._v("类型")]),s("th",[t._v("目标")]),s("th",{attrs:{width:"140px"}},[t._v("操作")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-group-append"},[s("span",{staticClass:"input-group-text"},[t._v("路径")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-group-append"},[s("span",{staticClass:"input-group-text"},[t._v("主页")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-group-prepend"},[s("span",{staticClass:"input-group-text"},[t._v("负载")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-group-prepend"},[s("span",{staticClass:"input-group-text"},[t._v("额外地址")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-group-prepend"},[s("div",{staticClass:"input-group-text"},[t._v("\n                                        代理地址：\n                                    ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-group-prepend"},[s("button",{staticClass:"btn btn-dark "},[t._v("\n                转向负载：\n            ")])])}],Y=s("75f7"),tt={name:"ServerLocations",components:{BasicAuth:C,AllowDeny:Q,Partamters:Y["a"]},model:{prop:"server",event:"change"},props:["server"],data:function(){return{upstreams:[{name:"未找到负载"}],showParams:null}},created:function(){this.queryUpstreams()},methods:{queryUpstreams:function(){var t=this;t.$axios.get("/admin/api/upstream").then((function(e){t.upstreams=e})).catch((function(e){t.$toast.error("获取负载均衡错误"+e.message)}))},changeType:function(t){var e=this.server.locations[t];this.$delete(e,"upstream"),this.$delete(e,"http"),this.$delete(e,"html"),"upstream"===e.type?this.$set(e,"upstream",{name:"",path:""}):"html"===e.type?this.$set(e,"html",{path:"",model:"root",indexes:"index.html index.htm"}):"http"===e.type&&this.$set(e,"http",{to:""})},addLocation:function(){this.server.locations.push({path:"",type:"http",http:{to:""},parameters:[]})},moveUp:function(t){this.server.locations[t]=this.server.locations.splice(t-1,1,this.server.locations[t])[0]},delLoc:function(t){this.server.locations.splice(t,1)},showParamIdx:function(t){this.showParams===t?this.showParams=null:this.showParams=t}}},et=tt,st=Object(p["a"])(et,X,Z,!1,null,null,null),rt=st.exports,at=s("fc76"),nt={name:"ServerEdit",components:{Partamters:Y["a"],HideCard:at["a"],ServerLocations:rt,AllowDeny:Q,ServerName:U,ServerListens:I,ServerSSL:L,BasicAuth:C,RewriteMobile:d,VTitle:n["a"],codemirror:o["codemirror"]},data:function(){return{server:{},cmOptions:{tabSize:4,theme:"lesser-dark",mode:"json",line:!0,lineWrapping:!0,lineNumbers:!0,collapseIdentical:!1,highlightDifferences:!0}}},mounted:function(){this.$route.query.name?this.getServer():this.setServerProtocol("http")},computed:{serverString:function(){return JSON.stringify(this.server,null,"\t")}},methods:{setServerProtocol:function(t){"http"===t?this.server={queries:[],commit:"",protocol:"http",listens:[{port:80,default:!1,http2:!1,ssl:!1}],domains:[""],locations:[{path:"/",type:"http",http:{to:""},basicHeader:!0,webSocket:!1,parameters:[]}],parameters:[]}:void 0===this.$route.query.name&&(this.server={queries:[],commit:"",protocol:t,listens:[{port:8080}],proxyPass:"",parameters:[]})},getServer:function(){var t=this,e="/admin/api/server?name="+t.$route.query.name+"&protocol="+t.$route.query.protocol;t.$axios.get(e).then((function(e){t.server=e[0]})).catch((function(e){t.$alert(e.message)}))},modfiyServer:function(){var t=this;t.$axios.post("/admin/api/server",this.server).then((function(e){t.$toast.success("更新成功！"),t.$router.push({path:"/admin/servers"})})).catch((function(e){t.$alert(e.message)}))}}},ot=nt,it=(s("6d20"),Object(p["a"])(ot,r,a,!1,null,null,null));e["default"]=it.exports},e7c8:function(t,e,s){var r=s("21d9"),a=s("0c29"),n=s("a86f"),o=s("0b34").Reflect;t.exports=o&&o.ownKeys||function(t){var e=r.f(n(t)),s=a.f;return s?e.concat(s(t)):e}},e7e0:function(t,e,s){var r=s("0677"),a=s("a4cf").document,n=r(a)&&r(a.createElement);t.exports=function(t){return n?a.createElement(t):{}}},ee68:function(t,e,s){var r=s("7c2b");r(r.S+r.F*!s("5e9e"),"Object",{defineProperty:s("597a").f})},f263:function(t,e,s){s("ee68");var r=s("ce99").Object;t.exports=function(t,e,s){return r.defineProperty(t,e,s)}}}]);
//# sourceMappingURL=chunk-3ef1f628.7cebe9da.js.map